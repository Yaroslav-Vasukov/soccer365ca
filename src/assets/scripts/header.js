function S(){document.querySelectorAll('[data-module="header"]').forEach(i=>{var b;if(i.__header_inited)return;i.__header_inited=!0;const r=i.querySelector("#main-nav"),v=[...r.querySelectorAll(".nav__item")],o=i.querySelector(".header__burger"),p=e=>e.querySelector(".nav__link"),h=e=>{const t=p(e).getAttribute("aria-controls");return t?i.querySelector("#"+t):null},x=e=>{const t=p(e),n=h(e);!t||!n||(e.classList.add("is-open"),t.setAttribute("aria-expanded","true"),n.hidden=!1)},y=e=>{const t=p(e),n=h(e);e.classList.remove("is-open"),t&&t.setAttribute("aria-expanded","false"),n&&(n.hidden=!0)},c=()=>v.forEach(y),d=document.documentElement;let u=null,a=null;const w=()=>`${Math.max(window.innerWidth-document.documentElement.clientWidth,0)}px`;function _(){a||(a=document.createElement("div"),a.className="nav-overlay",a.addEventListener("pointerdown",e=>{e.preventDefault(),s()}),document.body.appendChild(a))}function g(){a&&(a.removeEventListener("click",s),a.remove(),a=null)}function k(){u=document.activeElement,d.style.setProperty("--sbw",w()),d.classList.add("menu-open"),o.setAttribute("aria-expanded","true"),r.setAttribute("aria-hidden","false"),_();const e=r.querySelector('button, a, [tabindex]:not([tabindex="-1"])');e&&e.focus(),document.addEventListener("keydown",E)}function s(){d.classList.remove("menu-open"),d.style.removeProperty("--sbw"),o.setAttribute("aria-expanded","false"),r.setAttribute("aria-hidden","true"),c(),g(),u&&u.focus&&u.focus(),document.removeEventListener("keydown",E)}function E(e){e.key==="Escape"&&s()}o==null||o.addEventListener("click",e=>{e.stopPropagation(),o.getAttribute("aria-expanded")==="true"?s():k()});let l=null;v.forEach(e=>{e.addEventListener("pointerenter",()=>{window.matchMedia("(max-width:1024px)").matches||(clearTimeout(l),l=setTimeout(()=>{c(),x(e)},80))}),e.addEventListener("pointerleave",()=>{window.matchMedia("(max-width:1024px)").matches||(clearTimeout(l),l=setTimeout(()=>y(e),120))})}),r.addEventListener("click",e=>{const t=e.target.closest(".nav__link");if(!t)return;const n=t.closest(".nav__item"),f=t.getAttribute("aria-expanded")==="true";c(),f||x(n)}),r.addEventListener("keydown",e=>{const t=e.target.closest(".nav__link");if(t)switch(e.key){case"Enter":case" ":e.preventDefault(),t.click();break;case"Escape":t.getAttribute("aria-expanded")==="true"?c():s(),t.focus();break;case"ArrowRight":case"ArrowLeft":{e.preventDefault();const n=[...r.querySelectorAll(".nav__link")],f=n.indexOf(t),L=e.key==="ArrowRight"?(f+1)%n.length:(f-1+n.length)%n.length;n[L].focus();break}}}),document.addEventListener("pointerdown",e=>{d.classList.contains("menu-open")||i.contains(e.target)||c()});const m=window.matchMedia("(min-width:1025px)"),A=()=>{m.matches&&s()};(b=m.addEventListener)==null||b.call(m,"change",A)})}export{S as default};
