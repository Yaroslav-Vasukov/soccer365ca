function q(){const s="__paginationInstances";window[s]||(window[s]=[]),document.querySelectorAll("[data-pagination],[data-paginate]").forEach(l=>{const o=U(l);o&&window[s].push(o)}),window.__paginationPopstateBound||(window.addEventListener("popstate",()=>{window[s].forEach(l=>l.render(l.getPageFromUrl(),{push:!1}))}),window.__paginationPopstateBound=!0)}function U(s){const l=s.dataset,o=(e,t)=>l[e]??l[t],x=o("paginationItems","items"),g=x?s.querySelector(x):s;if(!g)return null;const b=o("paginationItem","item")||"> *",m=Array.from(g.querySelectorAll(b));if(!m.length)return null;const h=_(o("paginationSize","pageSize"),12),y=_(o("paginationWindow","window"),5),d=o("paginationParam","param")||(s.id?`${s.id}-page`:"page"),L=o("paginationPrev","prev")||"Prev",M=o("paginationNext","next")||"Next";let p=s.querySelector(o("paginationPager","pager")||".pagination")||E(s);function _(e,t){const n=parseInt(e||"",10);return Number.isFinite(n)&&n>0?n:t}function u(e,t,n){return Math.min(Math.max(e,t),n)}function w(){return Math.max(1,Math.ceil(m.length/h))}function v(){const e=parseInt(new URLSearchParams(location.search).get(d)||"1",10);return u(e,1,w())}function P(e,{push:t=!0}={}){e=u(e,1,w());const n=(e-1)*h,r=n+h;if(m.forEach((a,i)=>{a.hidden=i<n||i>=r}),k(e,w()),t){const a=new URL(location.href);e===1?a.searchParams.delete(d):a.searchParams.set(d,String(e));const i=a.pathname+a.search,c=location.pathname+location.search;i!==c&&history.pushState({[d]:e},"",i)}s.hasAttribute("data-pagination-autoscroll")&&(g||s).scrollIntoView({behavior:"smooth",block:"start"})}function E(e){const t=document.createElement("nav");return t.className="pagination",t.setAttribute("aria-label","Pagination"),e.appendChild(t),t}function A(e){const t=new URL(location.href);return e===1?t.searchParams.delete(d):t.searchParams.set(d,String(e)),t.pathname+t.search}function S(e,t,{disabled:n=!1,active:r=!1,className:a=""}={}){const i=document.createElement("a");return i.href=A(t),i.className=`pagination__link${a?` ${a}`:""}`,n&&i.classList.add("is-disabled"),r&&(i.classList.add("active"),i.setAttribute("aria-current","page")),i.textContent=e,i.addEventListener("click",c=>{c.metaKey||c.ctrlKey||c.shiftKey||c.button===1||(c.preventDefault(),n||P(t))}),i}function I(){const e=document.createElement("span");return e.className="pagination__ellipsis",e.textContent="â€¦",e}function N(e,t,n){const r=new Set([1,t]),a=Math.floor(n/2),i=u(e-a,2,Math.max(2,t-1)),c=u(e+a,2,Math.max(2,t-1));for(let f=i;f<=c;f++)r.add(f);return Array.from(r).sort((f,H)=>f-H)}function k(e,t){if(p.style.display=t>1?"":"none",t<=1){p.innerHTML="";return}p.innerHTML="",p.append(S(L,Math.max(1,e-1),{disabled:e===1,className:"pagination__prev"}));const n=N(e,t,y);for(let r=0;r<n.length;r++){const a=n[r];r>0&&a-n[r-1]>1&&p.append(I()),p.append(S(String(a),a,{active:a===e}))}p.append(S(M,Math.min(t,e+1),{disabled:e===t,className:"pagination__next"}))}return P(v(),{push:!1}),{render:P,getPageFromUrl:v}}export{q as default,q as initPaginationAll};
